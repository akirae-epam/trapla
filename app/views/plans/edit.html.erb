<% provide(:title, "プランの編集") %>
<%= render 'plans/plan_form', plan_form_button: 'プラン概要を変更する' %>
<%# アクティビティがあれば表示 %>
<% if @plan_details %>
  <%= render 'plans/belongings' %>
  <%= render 'plan_details/plan_details' %>
<% end %>
<script type="text/javascript">
// 共有するJavaScriptは/app/assets/javascripts/application.jsに記載
  $(function() {
    //１アクティビティにマウスを載せたら編集メニューを表示
    $('.plan-detail').mouseover(function(){
      $(this).css('background-color', '#E0FFFF');
      $(this).children('.plan-detail-edit').show();
    })

    $('.plan-detail').mouseout(function(){
      $(this).css('background-color', '');
      $(this).children('.plan-detail-edit').hide();
    })

    // フォーム表示
    $('.add-plan-detail-button').children('img').on('click', function(){
      if (lastFormId ==='.add-plan-detail') {
        $(lastFormId).hide('fast'); //同じフォームのボタンならフォームを隠すだけ
        lastFormId = '';   // 表示するフォームのクラスを削除
      } else {
        $(lastFormId).hide('fast').empty(); //他のフォームを開いていたら削除
        lastFormId = '.add-plan-detail';   // 表示するフォームのクラスを記憶
        $(lastFormId).show('fast'); // 編集画面を描写
      }
    })

  })

  jQuery.default(); // フォームの共通設定を読み込み
</script>
